## AI Coding Guide for OneStream_Speed

- Source of truth is OneStream XF; files mirror platform objects. Use the Code Utility for OneStream VS Code extension to import/export XML packages—no traditional build/deploy.
- Architecture: Workspaces → Maintenance Units → Assemblies; most assemblies depend on the global utility assembly under [Assemblies/OS Consultant Tools/App Objects (Globals)/GBL_UI_Assembly](Assemblies/OS%20Consultant%20Tools/App%20Objects%20(Global)s/GBL_UI_Assembly) which supplies helpers, SQL adapters, and shared services.
- Folder-to-export mapping (from Code Utility): Assemblies → ApplicationWorkspaces.xml; Dashboard* and Spreadsheet → ApplicationWorkspaces.xml; Finance → FinanceRules.xml; *EventHandler → ExtensibilityRules.xml; Connector/Parser → DataSources.xml; TransformationRule/ConditionalRule → TransformationRules.xml; SmartIntegrationFunction → SmartIntegration.xml; CubeViewExtender → CubeViews.xml. Keep rules in the matching folder.
- Namespaces retain placeholders `__WsNamespacePrefix` and `__WsAssemblyName`; do not replace them manually.
- Standard entrypoints: DashboardExtender/DashboardDataSet/DashboardStringFunction/Spreadsheet rules expose `Main(SessionInfo si, BRGlobals globals, object api, Args args)` with a switch on FunctionType or FunctionName.
- Service factories wire assemblies to dashboards: [Assemblies/OS Consultant Tools/Dynamic Dashboard Manager/DDM_UI_Assembly/Factory/DDM_Svc_Factory.cs](Assemblies/OS%20Consultant%20Tools/Dynamic%20Dashboard%20Manager/DDM_UI_Assembly/Factory/DDM_Svc_Factory.cs#L1-L38), [Assemblies/OS Consultant Tools/Finance Model Manager/FMM_UI_Assembly/Factory/FMM_Svc_Factory.cs](Assemblies/OS%20Consultant%20Tools/Finance%20Model%20Manager/FMM_UI_Assembly/Factory/FMM_Svc_Factory.cs#L1-L42), [Assemblies/OS Consultant Tools/Model Dimension Manager/MDM_Svc_Factory_Assembly/Factory/MDM_Svc_Factory.cs](Assemblies/OS%20Consultant%20Tools/Model%20Dimension%20Manager/MDM_Svc_Factory_Assembly/Factory/MDM_Svc_Factory.cs#L1-L34). Map `WsAssemblyServiceType.DynamicDashboards` → `*_DynDB_Svc`, `WsAssemblyServiceType.Dashboard` → `*_DB_Svc`.
- Error handling: wrap logic in try/catch and rethrow/log via `ErrorHandler.LogWrite(si, new XFException(si, ex))` or `new XFException(si, ex)` consistent with factory patterns.
- BRApi usage: `BRApi.Database.CreateApplicationDbConnInfo(si)` for DB connections; `BRApi.FileSystem.*` for file access; `BRApi.State.*` for session-scoped state; `BRApi.ErrorLog.LogMessage` for diagnostics. Avoid direct `File` IO and hardcoded connection strings in runtime rules.
- String comparisons prefer OneStream helpers like `XFEqualsIgnoreCase` over manual casing.
- Custom table naming uses `<Prefix>_<Entity>` per assembly (DDM_, FMM_, etc.). SQL adapters live under each assembly’s `SQL Adapters/` folder, e.g., [Assemblies/OS Consultant Tools/App Objects (Globals)/GBL_UI_Assembly/SQL Adapters/SQL_GBL_Get_DataSets.cs](Assemblies/OS%20Consultant%20Tools/App%20Objects%20(Global)s/GBL_UI_Assembly/SQL%20Adapters/SQL_GBL_Get_DataSets.cs#L1-L37).
- Shared utilities: GBL_UI_Assembly hosts cross-assembly helpers; see bulk CSV importer in [Assemblies/OS Consultant Tools/App Objects (Globals)/GBL_UI_Assembly/GBL Support Classes/GBL_Import_CSV.cs](Assemblies/OS%20Consultant%20Tools/App%20Objects%20(Global)s/GBL_UI_Assembly/GBL%20Support%20Classes/GBL_Import_CSV.cs#L1-L130).
- Databuffer pattern: prefer the parameterized helper in [Assemblies/00 GBL/GBL Objects/GBL_Assembly/XFBRs/README.md](Assemblies/00%20GBL/GBL%20Objects/GBL_Assembly/XFBRs/README.md) (function `GBL_DataBuffer_Helper.GetDataBufferMembers`) to avoid bespoke loops; documented examples live alongside.
- Configuration is for IntelliSense only: [Directory.Build.props](Directory.Build.props) points to OneStream DLLs; [OneStream_Speed.csproj](OneStream_Speed.csproj) holds references; [omnisharp.json](omnisharp.json) tunes the language server. `dotnet build` is not a deployment path.
- Workflow: (1) Import objects via the extension, (2) edit C#/VB locally, (3) optional syntax check through IntelliSense, (4) generate/export XML into GeneratedXML/, (5) import back into OneStream and test there.
- Testing/logging happens inside OneStream; use BRApi logging and the System Log. For timing, wrap with `System.Diagnostics.Stopwatch` and log elapsed ms.
- Conventions: keep placeholder namespaces; place new rules under the correct rule-type folder; prefer BRApi for DB/file/state work; keep state session-scoped; avoid introducing non-ASCII unless already present.
- Abbreviations: SI=SessionInfo, BR=Business Rule, WS=Workspace, SQA=SQL Adapter, XFTV=XF Table View.

Keep these instructions concise and update when workflows or shared utilities change.
